var PhotoSwipeAddon=function(a){"use strict";var b=this,c="";b.options={el:"",thumbnails:!0,wrap:"pswp-addon",item:"a",items:[],animateZoom:!0,pswp_settings:{}},null!==a&&$.extend(b.options,a),b.init=function(){b.pswpElement=document.querySelectorAll(".pswp")[0],b.getItems(),b.makePswpSettings(),b.makeThumbs(),b.openPSWP(),b.bindThumbsEvents(),b.setActiveThumb(),b.video()},b.getItems=function(){0===b.options.items.length&&b.options.el.closest(b.options.wrap).find(b.options.item).each(function(a,d){var e=$(this),f={src:e.attr("href"),msrc:e.find("img").attr("src"),w:e.attr("data-w"),h:e.attr("data-h"),title:e.attr("title"),pid:a,el:e};if(e.attr("data-url")&&b.isValidYouTubeUrl(e.attr("data-url"))){var g="";g+='<div class="video-wrap">',g+="<div>",g+='<iframe src="" frameborder="0" allowfullscreen></iframe>',g+="</div>",g+="</div>",g+='<div class="image-wrap" data-url="'+e.attr("data-url")+'">',g+='<img src="'+e.attr("href")+'" class="pswp_img">',g+="</div>",f={msrc:e.find("img").attr("src"),w:e.attr("data-w"),h:e.attr("data-h"),title:e.attr("title"),pid:a,el:e,html:g}}if(b.options.items.push(f),b.options.thumbnails===!0){var h="<li>"+e.html()+"</li>";e.attr("data-url")&&b.isValidYouTubeUrl(e.attr("data-url"))&&(h='<li class="video-thumb">'+e.html()+"</li>"),c+=h}})},b.makeThumbs=function(){b.options.thumbnails===!0&&c.length>0&&($(".pswp").addClass("pswp__has-thumbs"),$(".pswp__thumbs-list").html("").append("<ul>"+c+"</ul>"))},b.bindThumbsEvents=function(){$(".pswp");c.length>0&&($(document).off("click.pswp__thumbs").on("click.pswp__thumbs",".pswp__thumbs li",function(){var a=$(this);b.pswpGallery.goTo(a.index()),a.addClass("pswp__thumb-active").siblings().removeClass("pswp__thumb-active")}),b.pswpGallery.listen("afterChange",function(){b.setActiveThumb()}),b.pswpGallery.listen("close",function(){$(".pswp").removeClass("pswp__has-thumbs")}))},b.setActiveThumb=function(){if(c.length>0){var a=$(".pswp__thumbs li").eq(b.pswpGallery.getCurrentIndex()),d=0;d=0===a.prev().length?a.offset().left+$(".pswp__thumbs").scrollLeft():a.prev().offset().left+$(".pswp__thumbs").scrollLeft(),$(".pswp__thumbs").stop(!1,!1).animate({scrollLeft:d},300,"swing"),a.addClass("pswp__thumb-active").siblings().removeClass("pswp__thumb-active")}},b.makePswpSettings=function(){b.options.animateZoom&&(b.pswp_settings_addon={getThumbBoundsFn:function(a){var c=b.options.items[a].el[0].getElementsByTagName("img")[0],d=window.pageYOffset||document.documentElement.scrollTop,e=c.getBoundingClientRect();return{x:e.left,y:e.top+d,w:e.width}}}),$.extend(b.options.pswp_settings,b.pswp_settings_addon)},b.openPSWP=function(){b.pswpGallery=new PhotoSwipe(b.pswpElement,PhotoSwipeUI_Default,b.options.items,b.options.pswp_settings),b.pswpGallery.init()},b.isValidYouTubeUrl=function(a){var b=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;return a.match(b)?RegExp.$1:!1},b.video=function(){$("body").on("touchstart click",".image-wrap",function(){var a=$(this),c=a.attr("data-url"),d=b.isValidYouTubeUrl(c),e="https://www.youtube.com/embed/"+d+"?autoplay=1";a.hide(),a.siblings(".video-wrap").find("iframe").show().attr("src",e),a.siblings(".video-wrap").show()}),b.pswpGallery.listen("beforeChange",function(){var a=$(".image-wrap"),b=a.siblings(".video-wrap").find("iframe");a.show(),b.attr("src","").hide()}),b.pswpGallery.listen("close",function(){var a=$(".image-wrap"),b=a.siblings(".video-wrap").find("iframe");a.show(),b.attr("src","").hide()})},b.init()};